"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("zod");function t(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}function r(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if("default"!==r&&!(r in e)){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(e)}var s=t(e);function a(e){return t=>{if(!function(e){var t;return"custom"===e.code&&(null==(t=e.params)?void 0:t.isNestJsZod)}(t))return{matched:!1};const r=e(t.params);return r.matched?r:{matched:!1}}}function n(t,r){return s=>{if(s.code!==e.ZodIssueCode.too_small&&s.code!==e.ZodIssueCode.too_big)return{matched:!1};if(s.type!==t)return{matched:!1};const a=r(s);return a.matched?a:{matched:!1}}}const i=a((e=>{if("invalid_date_string"===e.code){return{matched:!0,message:"Invalid string, expected it to be a valid date"}}if("invalid_date_string_format"===e.code){return{matched:!0,message:`Invalid date, expected it to match ${{date:'YYYY-MM-DD (RFC3339 "full-date")',"date-time":'YYYY-MM-DDTHH:mm:ssZ (RFC3339 "date-time")'}[e.expected]}`}}if("invalid_date_string_direction"===e.code){return{matched:!0,message:`Invalid date, expected it to be the ${e.expected}`}}if("invalid_date_string_day"===e.code){return{matched:!0,message:`Invalid date, expected it to be a ${{weekDay:"week day",weekend:"weekend"}[e.expected]}`}}return{matched:!1}})),o=n("date_string_year",(t=>{if(t.code===e.ZodIssueCode.too_small){return{matched:!0,message:`Year must be greater than ${t.inclusive?"or equal to ":""}${t.minimum}`}}if(t.code===e.ZodIssueCode.too_big){return{matched:!0,message:`Year must be less than ${t.inclusive?"or equal to ":""}${t.maximum}`}}return{matched:!1}})),d=a((e=>{if("invalid_password_no_digit"===e.code){return{matched:!0,message:"Password must contain at least one digit"}}if("invalid_password_no_lowercase"===e.code){return{matched:!0,message:"Password must contain at least one lowercase letter"}}if("invalid_password_no_uppercase"===e.code){return{matched:!0,message:"Password must contain at least one uppercase letter"}}if("invalid_password_no_special"===e.code){return{matched:!0,message:"Password must contain at least one special symbol"}}return{matched:!1}})),c=n("password",(t=>{if(t.code===e.ZodIssueCode.too_small){return{matched:!0,message:`Password length must be greater than ${t.inclusive?"or equal to ":""}${t.minimum}`}}if(t.code===e.ZodIssueCode.too_big){return{matched:!0,message:`Password length must be less than ${t.inclusive?"or equal to ":""}${t.maximum}`}}return{matched:!1}})),u=(l=[i,o,d,c],e=>{for(const t of l){const r=t(e);if(r.matched)return r}return{matched:!1}});var l;const m=(t,r)=>{const s=u(t);return s.matched?{message:s.message}:e.defaultErrorMap(t,r)};function p(t){e.setErrorMap(t)}function f(e){return e}p(m);const g=e.z.union([e.z.string(),e.z.number(),e.z.boolean()]),h=(t="Expected value to be a JSON-serializable")=>{const r=e.z.lazy((()=>e.z.union([g,e.z.array(r),e.z.record(r)],{invalid_type_error:t})));return r};function _(t,r){e.addIssueToContext(t,r)}function y(e){return"string"==typeof e?{message:e}:e}function v(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:s,description:a}=e;if(t&&(r||s))throw new Error('Can\'t use "invalid" or "required" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,r)=>"invalid_type"!==t.code?{message:r.defaultError}:void 0===r.data&&s?{message:s}:e.invalid_type_error?{message:e.invalid_type_error}:{message:r.defaultError},description:a}}function k(e,t){return e.find((e=>e.kind===t))}var w=(e=>(e.ZodDateString="ZodDateString",e.ZodPassword="ZodPassword",e))(w||{}),b=Object.defineProperty,x=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,j=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&I(e,r,t[r]);if(O)for(var r of O(t))P.call(t,r)&&I(e,r,t[r]);return e};const D={date:/^\d{4}-\d{2}-\d{2}$/,"date-time":/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(|\.\d{3})(Z|[+-]\d{2}:\d{2})$/},Y=class extends e.ZodType{_parse(t){const r=this._getType(t),s=this._getOrReturnCtx(t);if(r!==e.ZodParsedType.string)return _(s,{code:e.ZodIssueCode.invalid_type,expected:e.ZodParsedType.string,received:s.parsedType}),e.INVALID;const a=new Date(t.data);if(Number.isNaN(a.getTime()))return _(s,{code:e.ZodIssueCode.custom,message:"Invalid date string",params:{isNestJsZod:!0,code:"invalid_date_string"}}),e.INVALID;const n=new e.ParseStatus;for(const r of this._def.checks)if("format"===r.kind){if(r.regex.test(t.data))continue;_(s,{code:e.ZodIssueCode.custom,message:r.message,params:{isNestJsZod:!0,code:"invalid_date_string_format",expected:r.value}}),n.dirty()}else if("direction"===r.kind){if({past:a<new Date,future:a>new Date}[r.direction])continue;_(s,{code:e.ZodIssueCode.custom,message:r.message,params:{isNestJsZod:!0,code:"invalid_date_string_direction",expected:r.direction}}),n.dirty()}else if("day-type"===r.kind){const t=a.getDay();if({weekDay:0!==t&&6!==t,weekend:0===t||6===t}[r.type])continue;_(s,{code:e.ZodIssueCode.custom,message:r.message,params:{isNestJsZod:!0,code:"invalid_date_string_day",expected:r.type}}),n.dirty()}else if("minYear"===r.kind){if(a.getFullYear()>=r.value)continue;_(s,{code:e.ZodIssueCode.too_small,type:"date_string_year",minimum:r.value,inclusive:!0,message:r.message}),n.dirty()}else if("maxYear"===r.kind){if(a.getFullYear()<=r.value)continue;_(s,{code:e.ZodIssueCode.too_big,type:"date_string_year",maximum:r.value,inclusive:!0,message:r.message}),n.dirty()}return{status:n.value,value:t.data}}_replaceCheck(e){return new Y((t=j({},this._def),r={checks:this._def.checks.filter((t=>t.kind!==e.kind)).concat(e)},x(t,Z(r))));var t,r}format(e,t){return this._replaceCheck(j({kind:"format",value:e,regex:D[e]},y(t)))}past(e){return this._replaceCheck(j({kind:"direction",direction:"past"},y(e)))}future(e){return this._replaceCheck(j({kind:"direction",direction:"future"},y(e)))}weekDay(e){return this._replaceCheck(j({kind:"day-type",type:"weekDay"},y(e)))}weekend(e){return this._replaceCheck(j({kind:"day-type",type:"weekend"},y(e)))}minYear(e,t){return this._replaceCheck(j({kind:"minYear",value:e},y(t)))}maxYear(e,t){return this._replaceCheck(j({kind:"maxYear",value:e},y(t)))}cast(){return this.transform((e=>new Date(e)))}get format_(){return k(this._def.checks,"format")}get isPast(){var e;return"past"===(null==(e=k(this._def.checks,"direction"))?void 0:e.direction)}get isFuture(){var e;return"future"===(null==(e=k(this._def.checks,"direction"))?void 0:e.direction)}get isWeekDay(){var e;return"weekDay"===(null==(e=k(this._def.checks,"day-type"))?void 0:e.type)}get isWeekend(){var e;return"weekend"===(null==(e=k(this._def.checks,"day-type"))?void 0:e.type)}get minYear_(){return k(this._def.checks,"minYear")}get maxYear_(){return k(this._def.checks,"maxYear")}};let E=Y;E.create=e=>new Y(j({checks:[{kind:"format",value:"date-time",regex:D["date-time"]}],typeName:w.ZodDateString},v(e)));const $=E.create;var T=Object.defineProperty,z=Object.defineProperties,M=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,F=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,q=(e,t)=>{for(var r in t||(t={}))L.call(t,r)&&F(e,r,t[r]);if(N)for(var r of N(t))S.call(t,r)&&F(e,r,t[r]);return e};const A=["digit","lowercase","uppercase","special"],J={digit:/\d/,lowercase:/[a-z]/,uppercase:/[A-Z]/,special:/[!?@#$%^&*{};.,:%â„–"|\\/()-_+=<>`~[\]'"]/};function R(e){return A.includes(e.kind)}const V=class extends e.ZodType{_parse(t){const r=this._getType(t),s=this._getOrReturnCtx(t);if(r!==e.ZodParsedType.string)return _(s,{code:e.ZodIssueCode.invalid_type,expected:e.ZodParsedType.string,received:s.parsedType}),e.INVALID;const a=new e.ParseStatus;for(const r of this._def.checks)if(R(r)){if(J[r.kind].test(t.data))continue;_(s,{code:e.ZodIssueCode.custom,message:r.message,params:{isNestJsZod:!0,code:`invalid_password_no_${r.kind}`}}),a.dirty()}else if("minLength"===r.kind){if(t.data.length>=r.value)continue;_(s,{code:e.ZodIssueCode.too_small,type:"password",minimum:r.value,inclusive:!0,message:r.message}),a.dirty()}else if("maxLength"===r.kind){if(t.data.length<=r.value)continue;_(s,{code:e.ZodIssueCode.too_big,type:"password",maximum:r.value,inclusive:!0,message:r.message}),a.dirty()}return{status:a.value,value:t.data}}_replaceCheck(e){return new V((t=q({},this._def),r={checks:this._def.checks.filter((t=>t.kind!==e.kind)).concat(e)},z(t,M(r))));var t,r}buildFullRegExp(){const e=[];for(const t of this._def.checks){if(!R(t))continue;const r=J[t.kind];e.push(`(?=.*${r.source})`)}if(0===e.length)return/^.*$/;const t=e.join("");return new RegExp(`^(?:${t}.*)$`)}atLeastOne(e,t){return this._replaceCheck(q({kind:e},y(t)))}min(e,t){return this._replaceCheck(q({kind:"minLength",value:e},y(t)))}max(e,t){return this._replaceCheck(q({kind:"maxLength",value:e},y(t)))}isAtLeastOne(e){return function(e,t){return Boolean(k(e,t))}(this._def.checks,e)}get minLength(){return k(this._def.checks,"minLength")}get maxLength(){return k(this._def.checks,"maxLength")}};let H=V;H.create=e=>new V(q({checks:[],typeName:w.ZodPassword},v(e)));const K=H.create;var W=r({__proto__:null,defaultErrorMap:m,setErrorMap:p,addIssueToContext:_,from:f,json:h,ZodDateString:E,dateString:$,ZodPassword:H,password:K,ZodFirstPartyTypeKindExtended:w},[s]);exports.ZodDateString=E,exports.ZodFirstPartyTypeKindExtended=w,exports.ZodPassword=H,exports.addIssueToContext=_,exports.dateString=$,exports.defaultErrorMap=m,exports.from=f,exports.json=h,exports.password=K,exports.setErrorMap=p,exports.z=W,Object.keys(e).forEach((function(t){"default"===t||exports.hasOwnProperty(t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})}));
